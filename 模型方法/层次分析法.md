---
created: 2025/11/20 09:50
updated: 2025/11/24 16:58
aliases:
  - AHP
  - Analytic Hierarchy Process
---
# 层次分析法的基本原理
层次分析法（Analytic Hierarchy Process，简称AHP）是对一些较为复杂、较为模糊的问题作出决策的简易方法，它特别适用于那些难于完全定量分析的问题。它是美国运筹学家T. L. Saaty教授于20世纪70年代初期提出的一种简便、灵活而又实用的多准则决策方法。

运用层次分析法建模，大体上可按下面四个步骤进行：
1. 建立递阶层次结构模型；
2. 构造出各层次中的所有判断矩阵；
3. 层次单排序及一致性检验；
4. 层次总排序及一致性检验。

## 7.2.1 递阶层次结构与特点
应用AHP分析决策问题时，首先要把问题条理化、层次化，构造出一个有层次的结构模型。在这个模型下，复杂问题被分解为元素的组成部分。这些元素又按其属性及关系形成若干层次。上一层次的元素作为准则对下一层次有关元素起支配作用。

这些层次可以分为三类。
- **目标层**：这一层次中只有一个元素，一般它是分析问题的预定目标或理想结果，因此也称为目标层。
- **准则层**：这一层次中包含了为实现目标所涉及的中间环节，它可以由若干个层次组成，包括所需考虑的准则、子准则。
- **方案层**：这一层次包括了为实现目标可供选择的各种措施、决策方案等。

递阶层次结构中的层次数与问题的复杂程度及需要分析的详尽程度有关，一般情况层次数不受限制。每一层次中各元素所支配的元素一般不要超过9个。这是因为支配的元素过多会给两两比较判断带来困难。


## 7.2.2 构造判断矩阵
层次结构反映了因素之间的关系，但准则层中的各准则在目标衡量中所占的比重并不一定相同，在决策者的心目中，它们各占有一定的比例。

在确定影响某因素的诸因子在该因素中所占的比重时，遇到的主要困难是这些比重常常不易定量化。此外，当影响某因素的因子较多时，直接考虑各因子对该因素有多大程度的影响时，常常会因考虑不全、顾此失彼而使决策者提出与他实际认为的重要性程度不


## 一、旅游地评价层次结构模型（图7-2）
- **目标层**：O（选择旅游地）
- **准则层**：C₁（景色）、C₂（费用）、C₃（居住）、C₄（饮食）、C₅（旅途）
- **方案层**：P₁、P₂、P₃（三个旅游胜地）

该模型直观呈现了从目标到准则再到方案的层次结构，是层次分析法解决旅游地选择问题的基础框架。

## 二、构造判断矩阵的背景
准则层各因素对目标的影响比重常难以直接定量，且多因素直接比较易考虑不全、顾此失彼，导致决策偏差。为解决这一问题，Saaty等人提出**成对比较判断矩阵**的方法：每次取两个因子 $x_i$ 和 $x_j$ 对比其对因素 $Z$ 的影响，将全部比较结果用矩阵 $A = (a_{ij})_{n×n}$ 表示（称 $A$ 为 $Z-X$ 之间的成对比较判断矩阵）。

## 三、正互反矩阵定义
若矩阵 $A = (a_{ij})_{n×n}$ 满足 $a_{ij} > 0$ 且 $a_{ji} = \frac{1}{a_{ij}} (i,j=1,2,\cdots,n)$，则称 $A$ 为**正互反矩阵**（显然 $a_{ii}=1, i=1,2,\cdots,n$）。

## 四、标度的含义（表7-1）
| 标度 | 含义 |
|------|------|
| 1    | 表示两个因素相比，具有相同重要性 |
| 3    | 表示两个因素相比，前者稍重要 |
| 5    | 表示两个因素相比，前者明显重要 |
| 7    | 表示两个因素相比，前者强烈重要 |
| 9    | 表示两个因素相比，前者极端重要 |
| 2,4,6,8 | 表示上述相邻判断的中间值 |
| 倒数 | 若因素 $i$ 与因素 $j$ 的重要性之比是 $a_{ij}$，则因素 $j$ 与因素 $i$ 的重要性之比是 $a_{ji}=1/a_{ij}$ |

从心理学角度，Saaty等人通过实验验证：1~9标度能较好平衡判断难度与准确性，分级过多会超越人们判断能力，增加难度且易出错，因此1~9标度实用价值较高。

## 五、两两判断的必要性
一般地，需作 $\frac{n(n-1)}{2}$ 次两两判断（$n$ 为元素个数）。若仅作 $n-1$ 次比较（将所有元素和某一个元素比较），虽过程简便，但任何一个判断失误都会影响整体结果，弊端明显。


层次分析法（AHP，Analytic Hierarchy Process）  
一句话：把复杂决策**拆成层次**，两两比较重要性，用**特征向量算权重**，最后加权汇总得分。

下面按“5 步 + 公式”速览。

---

### 1 建立层次结构
目标层 → 准则层 → 子准则层 → 方案层  
画成树状，同一层元素**互不重叠**。

---

### 2 构造判断矩阵
对同一上层元素，把下层 n 个因素两两比较重要性，1–9 标度：

| 标度 | 含义 |
|---|---|
| 1 | 同等重要 |
| 3 | 稍重要 |
| 5 | 明显重要 |
| 7 | 强烈重要 |
| 9 | 极端重要 |
| 2,4,6,8 | 中间值 |

得正互反矩阵  
$$
A = (a_{ij})_{n\times n},\quad a_{ji} = 1/a_{ij},\; a_{ii}=1.
$$

---

### 3 计算权重（特征向量法）
求最大特征值对应的**右特征向量**并归一化：

1. 幂法近似（实用版）：  
   ① 每列归一化得 $B=(b_{ij})$；  
   ② 行平均得权重向量  
   $$
   w_j = \frac{1}{n}\sum_{i=1}^n b_{ij},\quad \sum_{j=1}^n w_j=1.
   $$

2. 一致性检验  
   一致性指标  
   $$
   \text{CI}=\frac{\lambda_{\max}-n}{n-1},\quad
   \lambda_{\max}\approx \frac{1}{n}\sum_{i=1}^n \frac{(Aw)_i}{w_i}.
   $$
   随机一致性比率  
   $$
   \text{CR}=\frac{\text{CI}}{\text{RI}}.
   $$
   当 $\text{CR}<0.1$ 认为矩阵可接受；RI 查表（n=3 取 0.58，n=4 取 0.90 …）。

---

### 4 层次总排序
自上而下加权，得各方案对总目标的**综合权重**：

| 准则 | 权重 | 方案 A 局部权重 | 方案 B 局部权重 |
|---|---|---|---|
| C1 | 0.6 | 0.7 | 0.3 |
| C2 | 0.4 | 0.2 | 0.8 |

方案 A 总得分  
$$
S_A = 0.6\times 0.7 + 0.4\times 0.2 = 0.50.
$$

同理算 $S_B$，谁高谁优。

---

### 5 一致性再检验
对总排序也计算**组合一致性比率**，仍要求 $\text{CR}_{\text{total}}<0.1$。

---

### 6 一句话总结
AHP = **“拆层次、两两比、算特征向量得权重、一致性把关”**，把主观判断量化成数字，再合成最终排名。

### [[层次分析法]]在项目方案比选中的应用
- **案例背景**：某企业要建设一个新的生产车间，有三个不同的设计方案可供选择。需要从技术可行性、经济合理性、环境影响等多个方面对这三个方案进行综合评价，选出最优方案。
- **算法应用**：首先，建立层次结构模型，将目标层设为选择最优生产车间设计方案，准则层包括技术可行性、经济合理性、环境影响等因素，方案层为三个具体的设计方案。然后，构造判断矩阵，通过专家打分等方式确定各因素之间的相对重要性。例如，技术可行性与经济合理性相比，重要性比值为 3:2，即判断矩阵中相应元素为 3/2。接着，计算权重向量，通过求解判断矩阵的特征值和特征向量得到各因素的权重。最后，计算各方案的综合得分，将各方案在每个准则下的得分与相应准则的权重相乘并求和，得到各方案的综合得分，得分最高的方案即为最优方案。假设方案 A 在技术可行性、经济合理性、环境影响三个准则下的得分分别为 0.8、0.6、0.7，对应的权重分别为 0.4、0.3、0.3，则方案 A 的综合得分为 0.8×0.4 + 0.6×0.3 + 0.7×0.3 = 0.71。